# Архитектура Vita

## Общая схема

Архитектура системы Vita состоит из трех основных компонентов:
1. **Edge-модули** - устройства на границе сети, выполняющие специализированные задачи
2. **Центральный узел (Vita)** - основной вычислительный узел с мощным процессором и большим объемом памяти
3. **Система автоматизации** - платформа для управления устройствами и создания сценариев

Связь между компонентами осуществляется через протоколы MQTT и REST API.

## Компоненты

### Центральный узел (Мозг)
- **Hardware**: mini‑PC или ноутбук (64-128GB RAM)
- **LLM Engine**: llama.cpp / AirLLM
- **Функции**: Логика, память, обработка естественного языка

### Edge-модули "Зрение"
- **Hardware**: Orange Pi 5 Ultra, Jetson Nano 2 (8-16GB RAM)
- **CV Engine**: Frigate, YOLO, CLIP
- **Функции**: Компьютерное зрение, детекция объектов

### Edge-модули "Сенсоры"
- **Hardware**: ESP32, Zigbee, BLE
- **Engine**: MQTT, ESPHome
- **Функции**: Сбор данных с датчиков, управление устройствами

### Автоматизация
- **Platform**: Home Assistant, Node‑RED
- **Функции**: Сценарии, уведомления, интеграции

## Пример взаимодействия

1. **Видеонаблюдение**: Frigate обнаруживает движение → MQTT сообщение
2. **Обработка события**: Vita получает событие → llama.cpp генерирует контекстный ответ
3. **Реакция**: Ответ отправляется в Home Assistant → TTS озвучивает уведомление

## Потоки данных

### Голосовой ассистент
Поток данных голосового ассистента:
1. **Микрофон** - захват аудиосигнала
2. **Whisper STT** - преобразование речи в текст
3. **Vita (LLM)** - обработка текста и генерация ответа
4. **Piper TTS** - преобразование текста в речь
5. **Динамики** - воспроизведение аудиоответа

### Видеоаналитика
Поток данных видеоаналитики:
1. **Камера** - захват видеопотока
2. **Frigate** - обнаружение объектов и событий
3. **MQTT** - передача событий в систему
4. **Vita** - обработка событий и принятие решений
5. **Home Assistant** - выполнение действий
6. **TTS/Уведомления** - информирование пользователя

### Сенсорные данные
Поток данных от сенсоров:
1. **Датчики** - сбор данных о температуре, движении и других параметрах
2. **MQTT/ESPHome** - передача данных в систему
3. **Vita** - обработка данных и принятие решений
4. **Home Assistant** - выполнение действий
5. **Автоматизация** - выполнение сценариев и правил